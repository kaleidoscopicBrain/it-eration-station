<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT-eration Station</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Welcome to IT-eration Station</h1>

        {% if ceo_name == "Player" %}
            <p>Please enter your name:</p>
            <form action="/set_name" method="POST">
                <input type="text" name="player_name" required placeholder="Your Name">
                <button type="submit">Start Game</button>
            </form>
        {% else %}
            <div class="game-info">
                <p>Hello, {{ ceo_name }}!</p>
                <p>Money: ${{ money }}</p>
                <p>Tasks Completed: {{ tasks_completed }}</p>
            </div>

            <div>
                <button id="write_code">Write Code</button>
                <button id="solve_ticket">Solve Ticket</button>
            </div>
        {% endif %}
    </div>

    <script>
    // Send request to write code
    $('#write_code').on('click', function() {
        $.post("/write_code", function(data) {
            // Update the page with new data
            $(".game-info").html(`
                <p>Money: $${data.money}</p>
                <p>Tasks Completed: ${data.tasks_completed}</p>
            `);
        }).fail(function(jqXHR, textStatus, errorThrown) {
            console.log("Error:", textStatus, errorThrown);  // Log if AJAX fails
        });
    });

    // Send request to solve ticket
    $('#solve_ticket').on('click', function() {
        $.post("/solve_ticket", function(data) {
            // Update the page with new data
            $(".game-info").html(`
                <p>Money: $${data.money}</p>
                <p>Tasks Completed: ${data.tasks_completed}</p>
            `);
        }).fail(function(jqXHR, textStatus, errorThrown) {
            console.log("Error:", textStatus, errorThrown);  // Log if AJAX fails
        });
    });
</script>



</body>
</html>
